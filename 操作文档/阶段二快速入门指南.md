# 阶段二功能快速入门指南

## 🚀 5分钟快速上手

### 准备工作
1. 确保已加载点云数据到系统中
2. 切换到俯视图模式以便进行线段绘制
3. 熟悉基本的鼠标和键盘操作

### 方式一：基于线段的墙面拟合（推荐）

#### 步骤1：绘制墙面轮廓线段
```
1. 按 Ctrl+L 或点击菜单"墙面提取" → "基于线段的墙面拟合"
2. 在俯视图中沿着墙面方向绘制线段：
   - 点击鼠标左键设置起点
   - 移动到终点位置
   - 再次点击完成线段绘制
3. 重复绘制多条线段，覆盖主要墙面区域
```

#### 步骤2：执行墙面拟合
```
1. 绘制完成后，系统自动开始拟合过程
2. 观察进度对话框显示的处理进度
3. 等待拟合完成（通常几秒到几分钟）
```

#### 步骤3：查看结果
```
1. 拟合完成后自动弹出结果对话框
2. 查看"墙面"标签页了解检测到的墙面信息
3. 查看"统计信息"了解整体处理结果
4. 如需要，点击"导出结果"保存数据
```

### 方式二：自动墙面拟合

#### 一键操作
```
1. 按 Ctrl+A 或点击"自动墙面拟合"按钮
2. 系统自动分析点云数据并检测墙面
3. 查看结果对话框中的拟合结果
```

## 🎯 典型使用场景

### 场景1：室内房间墙面提取
**适用情况**：规整的室内环境，墙面清晰可见
**推荐方式**：基于线段的墙面拟合
**操作要点**：
- 沿着房间四周墙面绘制线段
- 确保线段方向与墙面平行
- 可以绘制不完整的线段，算法会自动延伸

### 场景2：复杂建筑结构分析
**适用情况**：不规则建筑，多个房间
**推荐方式**：组合使用两种方式
**操作要点**：
- 先用自动拟合获得整体结果
- 再用线段绘制补充细节区域
- 分区域处理复杂结构

### 场景3：快速批量处理
**适用情况**：大量相似数据需要处理
**推荐方式**：自动墙面拟合
**操作要点**：
- 调整算法参数适应数据特点
- 使用批处理模式
- 重点关注统计信息验证结果质量

## ⚡ 效率提升技巧

### 线段绘制技巧
1. **使用多段线模式**：按住Shift键连续绘制
2. **善用撤销功能**：Ctrl+Z快速纠错
3. **批量选择编辑**：Ctrl+A全选，批量操作
4. **保存常用模板**：Ctrl+S保存线段配置

### 参数调优技巧
1. **点云密度低**：减小距离阈值（0.05-0.08）
2. **点云密度高**：增大距离阈值（0.15-0.2）
3. **噪声较多**：增加最小内点数（100-200）
4. **精度要求高**：增加迭代次数（2000-5000）

### 结果验证技巧
1. **查看置信度**：关注低于0.8的墙面
2. **检查统计信息**：未分配点数过多需要调参
3. **对比原始数据**：在俯视图中验证拟合效果
4. **导出详细日志**：用于问题诊断

## 🔧 常用快捷键速查

| 功能 | 快捷键 | 说明 |
|------|--------|------|
| 基于线段拟合 | Ctrl+L | 启动线段绘制模式 |
| 自动拟合 | Ctrl+A | 一键自动检测墙面 |
| 取消操作 | Esc | 取消当前进行的操作 |
| 删除线段 | Delete | 删除选中的线段 |
| 撤销 | Ctrl+Z | 撤销上一步操作 |
| 全选 | Ctrl+A | 选择所有线段 |
| 保存 | Ctrl+S | 保存线段数据 |
| 导出 | Ctrl+E | 导出墙面结果 |
| 帮助 | F1 | 显示帮助信息 |

## 🚨 注意事项

### 数据准备
- ✅ 确保点云数据已正确加载
- ✅ 检查坐标系统是否正确
- ✅ 验证点云密度和质量
- ❌ 避免使用过于稀疏的点云数据

### 线段绘制
- ✅ 线段方向应与墙面平行
- ✅ 覆盖主要墙面区域即可
- ✅ 可以绘制不连续的线段
- ❌ 避免绘制过于倾斜的线段

### 参数设置
- ✅ 根据数据特点调整参数
- ✅ 从默认参数开始逐步优化
- ✅ 记录有效的参数组合
- ❌ 避免极端参数值

### 结果验证
- ✅ 检查墙面数量是否合理
- ✅ 验证墙面尺寸是否正确
- ✅ 关注置信度和统计信息
- ❌ 不要忽略异常结果

## 🎓 进阶使用

### 自定义算法参数
```cpp
// 在代码中调整RANSAC参数
RANSACParameters params;
params.probability = 0.99;        // 置信度
params.minPoints = 50;            // 最小内点数
params.distanceThreshold = 0.1;   // 距离阈值
params.maxIterations = 1000;      // 最大迭代次数
```

### 批处理脚本示例
```python
# Python脚本示例（伪代码）
for point_cloud_file in file_list:
    load_point_cloud(point_cloud_file)
    result = auto_wall_fitting()
    export_result(result, output_path)
```

### 结果后处理
1. **墙面合并**：合并相邻的平行墙面
2. **几何优化**：调整墙面交点和角度
3. **质量过滤**：移除置信度过低的墙面
4. **格式转换**：转换为CAD或BIM格式

## 📞 技术支持

### 问题反馈
- 详细描述操作步骤和遇到的问题
- 提供点云数据的基本信息（点数、范围、格式）
- 包含错误信息和日志文件
- 说明期望的结果和实际结果差异

### 性能优化咨询
- 提供硬件配置信息
- 描述数据规模和处理时间
- 说明性能瓶颈的具体表现
- 提供系统资源使用情况

---

**祝您使用愉快！如有问题，请参考详细操作说明文档或联系技术支持。**
